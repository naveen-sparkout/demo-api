{"version":3,"sources":["../../src/config/errorHandler.js"],"names":["allErrorHandler","err","req","res","next","status","winston","error","JSON","stringify","message","msgCode","name","json","success","errors","response","data","global","msg","EN"],"mappings":"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","sourcesContent":["import winston from \"./winston\";\r\n\r\nexport const allErrorHandler = (err, req, res, next) => {\r\n  res.status(err.status || 500);\r\n  winston.error(JSON.stringify(err));\r\n  if (err.message && typeof err.message === \"number\") {\r\n    err.msgCode = err.message;\r\n  }\r\n  if (err.name == \"ValidationError\") {\r\n    res.status = 400;\r\n    return res.json({\r\n      success: 0,\r\n      message: err.errors,\r\n      response: 400,\r\n      data: {},\r\n    });\r\n  } else {\r\n    if (err.msgCode == 3) {\r\n      res.status(401);\r\n      err.status = 401;\r\n    }\r\n    if (err.msgCode == 4) {\r\n      res.status(200);\r\n      err.status = 403;\r\n    }\r\n\r\n    if (err.status == 404) {\r\n      return res.json({\r\n        success: 0,\r\n        message: \"Not Found.\",\r\n        response: 404,\r\n        data: {},\r\n      });\r\n    } else if (err.status == 401) {\r\n      return res.json({\r\n        success: 0,\r\n        message: global.errors[err.msgCode].msg.EN,\r\n        response: 401,\r\n        data: {},\r\n      });\r\n    } else {\r\n      if (!err.msgCode) {\r\n        res.status(200);\r\n        return res.json({\r\n          success: 0,\r\n          message: err.message,\r\n          response: 400,\r\n          data: {},\r\n        });\r\n      } else {\r\n        if (err.msgCode === \"0005\") {\r\n          return res.json({\r\n            success: 0,\r\n            message: err.message,\r\n            response: 400,\r\n            data: {},\r\n          });\r\n        } else {\r\n          res.status(200);\r\n          return res.json({\r\n            success: 0,\r\n            message: global.errors[err.msgCode].msg.EN,\r\n            response: 400,\r\n            data: {},\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n"],"file":"errorHandler.js"}