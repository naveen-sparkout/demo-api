{"version":3,"sources":["../../src/config/multer.js"],"names":["aws","config","update","secretAccessKey","s3","accessKeyId","region","BUCKET","bucket","S3","upload","storage","acl","key","req","file","cb","console","log","originalname"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEAA,mBAAIC,MAAJ,CAAWC,MAAX,CAAkB;AACdC,EAAAA,eAAe,EAAEF,MAAM,CAACD,GAAP,CAAWI,EAAX,CAAcD,eADjB;AAEdE,EAAAA,WAAW,EAAEJ,MAAM,CAACD,GAAP,CAAWI,EAAX,CAAcC,WAFb;AAGdC,EAAAA,MAAM,EAAEL,MAAM,CAACD,GAAP,CAAWI,EAAX,CAAcE;AAHR,CAAlB;;AAKA,IAAMC,MAAM,GAAGN,MAAM,CAACD,GAAP,CAAWI,EAAX,CAAcI,MAA7B;AACA,IAAMJ,EAAE,GAAG,IAAIJ,mBAAIS,EAAR,EAAX;AACO,IAAMC,MAAM,GAAG,wBAAO;AACzBC,EAAAA,OAAO,EAAE,yBAAS;AACdP,IAAAA,EAAE,EAAEA,EADU;AAEdQ,IAAAA,GAAG,EAAE,aAFS;AAGdJ,IAAAA,MAAM,EAAED,MAHM;AAIdM,IAAAA,GAAG,EAAE,aAAUC,GAAV,EAAeC,IAAf,EAAqBC,EAArB,EAAyB;AAC1BC,MAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;AACAC,MAAAA,EAAE,CAAC,IAAD,EAAOD,IAAI,CAACI,YAAZ,CAAF;AACH;AAPa,GAAT;AADgB,CAAP,CAAf","sourcesContent":["import aws from 'aws-sdk';\r\nimport multer from 'multer';\r\nimport multerS3 from 'multer-s3';\r\nimport fs from 'fs';\r\nimport jimp from 'jimp';\r\nimport winston from './winston';\r\nimport path from \"path\";\r\n\r\naws.config.update({\r\n    secretAccessKey: config.aws.s3.secretAccessKey,\r\n    accessKeyId: config.aws.s3.accessKeyId,\r\n    region: config.aws.s3.region\r\n});\r\nconst BUCKET = config.aws.s3.bucket\r\nconst s3 = new aws.S3();\r\nexport const upload = multer({\r\n    storage: multerS3({\r\n        s3: s3,\r\n        acl: \"public-read\",\r\n        bucket: BUCKET,\r\n        key: function (req, file, cb) {\r\n            console.log(file);\r\n            cb(null, file.originalname)\r\n        }\r\n    })\r\n})\r\n\r\n"],"file":"multer.js"}